var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t){return""===t?null:+t}function m(t,e){t.value=null==e?"":e}function x(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function _(t,e,n){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function w(t){const e=t.querySelector(":checked");return e&&e.__value}function $(t,e,n){t.classList[n?"add":"remove"](e)}let b;function y(t){b=t}function k(){if(!b)throw new Error("Function called outside component initialization");return b}function C(){const t=k();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,o,e),i}(e,n,{cancelable:o});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const E=[],S=[];let R=[];const D=[],M=Promise.resolve();let A=!1;function Y(t){R.push(t)}function F(t){D.push(t)}const I=new Set;let L=0;function W(){if(0!==L)return;const t=b;do{try{for(;L<E.length;){const t=E[L];L++,y(t),O(t.$$)}}catch(t){throw E.length=0,L=0,t}for(y(null),E.length=0,L=0;S.length;)S.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];I.has(e)||(I.add(e),e())}R.length=0}while(E.length);for(;D.length;)D.pop()();A=!1,I.clear(),y(t)}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}const z=new Set;let H;function N(t,e){t&&t.i&&(z.delete(t),t.i(e))}function B(t,e,n,o){if(t&&t.o){if(z.has(t))return;z.add(t),H.c.push((()=>{z.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function J(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function T(t){t&&t.c()}function X(t,n,r,c){const{fragment:a,after_update:l}=t.$$;a&&a.m(n,r),c||Y((()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(Y)}function P(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];R.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),R=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(E.push(t),A||(A=!0,M.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,i,r,c,a,l,s,d=[-1]){const h=b;y(e);const f=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:i.target||h.$$.root};s&&s(f.root);let p=!1;if(f.ctx=r?r(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&j(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!c&&c(f.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();i.intro&&N(e.$$.fragment),X(e,i.target,i.anchor,i.customElement),W()}y(h)}class K{$destroy(){P(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function U(t){const{month:e,year:n,boxSize:o,backgroundImage:i,canvas:r,backgroundRect:c,calendarRect:a,calendarColor:l="#ffffff"}=t,u=r.getContext("2d");u.clearRect(0,0,r.width,r.height),i&&u.drawImage(i,c.x,c.y,c.width,c.height);u.fillStyle=l,u.strokeStyle=l,u.textBaseline="middle",u.textAlign="center",u.shadowColor="black",u.shadowOffsetX=1,u.shadowOffsetY=0,u.shadowBlur=4;let s=new Date(n,e,1).getDay()-1;s=-1===s?6:s;const d=new Date(n,e+1,0).getDate();let h=1,f=0,p=0;const g=7*o.width,v=a.x;let m=a.y;const x=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_=`${["January","February","March","April","May","June","July","August","September","October","November","December"][e]} - ${n}`;u.font="bold 20px Arial";const w=u.measureText(_),$=v+g/2,b=w.actualBoundingBoxAscent+w.actualBoundingBoxDescent;u.fillText(_,$,m+b),u.font="bold 16px Arial",m+=1.5*b;const y=b;for(let t=0;t<7;t++){const e=v+t*o.width;u.fillText(x[t],e+o.width/2,m+y)}m+=2*y,u.font="16px Arial";for(let t=0;t<6;t++){p=t*o.height+m;for(let e=0;e<7;e++)f=v+e*o.width,0===t&&e<s||h>d||(u.strokeRect(f,p,o.width,o.height),u.fillText(h.toString(),f+o.width/2,p+b),h++)}}const G=[];function Q(e,n=t){let o;const i=new Set;function c(t){if(r(e,t)&&(e=t,o)){const t=!G.length;for(const t of i)t[1](),G.push(t,e);if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(r,a=t){const l=[r,a];return i.add(l),1===i.size&&(o=n(c)||t),r(e),()=>{i.delete(l),0===i.size&&o&&(o(),o=null)}}}}const V=Q(void 0),Z=Q({width:100,height:100});function tt(t){let e,n,i,r,c,h,v,m,_,w,b,y,k,C;return{c(){e=s("div"),n=s("div"),n.innerHTML='<span class="reset-icon svelte-15y7gyd">Ã—</span>',i=f(),r=d("svg"),c=d("rect"),m=d("rect"),g(n,"class","reset-button svelte-15y7gyd"),$(n,"left-aligned",t[1]),$(n,"right-aligned",!t[1]),g(c,"class","dashed-main svelte-15y7gyd"),g(c,"x","0"),g(c,"y","0"),g(c,"width",h=t[0].width),g(c,"height",v=t[0].height),g(c,"stroke","white"),g(c,"stroke-width","2"),g(c,"fill","none"),g(m,"class","dashed-alternate svelte-15y7gyd"),g(m,"x","0"),g(m,"y","0"),g(m,"width",_=t[0].width),g(m,"height",w=t[0].height),g(m,"stroke","black"),g(m,"stroke-width","2"),g(m,"fill","none"),g(r,"xmlns","http://www.w3.org/2000/svg"),g(r,"width",b=t[0].width),g(r,"height",y=t[0].height),g(e,"class","bounding-box svelte-15y7gyd"),x(e,"left",t[0].x+"px"),x(e,"top",t[0].y+"px")},m(o,u){l(o,e,u),a(e,n),t[7](n),a(e,i),a(e,r),a(r,c),a(r,m),k||(C=[p(n,"pointerup",t[6]),p(e,"pointerdown",t[3]),p(e,"pointerup",t[5]),p(e,"pointermove",t[4])],k=!0)},p(t,o){2&o&&$(n,"left-aligned",t[1]),2&o&&$(n,"right-aligned",!t[1]),1&o&&h!==(h=t[0].width)&&g(c,"width",h),1&o&&v!==(v=t[0].height)&&g(c,"height",v),1&o&&_!==(_=t[0].width)&&g(m,"width",_),1&o&&w!==(w=t[0].height)&&g(m,"height",w),1&o&&b!==(b=t[0].width)&&g(r,"width",b),1&o&&y!==(y=t[0].height)&&g(r,"height",y),1&o&&x(e,"left",t[0].x+"px"),1&o&&x(e,"top",t[0].y+"px")},d(n){n&&u(e),t[7](null),k=!1,o(C)}}}function et(e){let n,o=e[0]&&tt(e);return{c(){o&&o.c(),n=h("")},m(t,e){o&&o.m(t,e),l(t,n,e)},p(t,[e]){t[0]?o?o.p(t,e):(o=tt(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&u(n)}}}function nt(t,e,n){const o=C();let{currentSelectedImage:i}=e;const r=V.subscribe((t=>{n(0,i=t)}));let c,a=!1,l=0,u=0,s=!1,d=!1,h=!1;var f;return f=()=>{r()},k().$$.on_destroy.push(f),t.$$set=t=>{"currentSelectedImage"in t&&n(0,i=t.currentSelectedImage)},t.$$.update=()=>{1&t.$$.dirty&&n(1,h=i&&i.x+i.width>window.innerWidth)},[i,h,c,function(t){i&&(l=t.clientX,u=t.clientY,s=!0,d=!1)},function(t){if(!s)return;const e=t.clientX-l,r=t.clientY-u;n(0,i.x+=e,i),n(0,i.y+=r,i),l=t.clientX,u=t.clientY,0===e&&0===r||(d=!0),a||(a=!0,requestAnimationFrame((()=>{a=!1,o("imageMoved",i)})))},function(t){s=!1,(d||c.contains(t.target))&&t.stopPropagation(),d=!1},function(){n(0,i.x=0,i),n(0,i.y=0,i),o("imageMoved",i)},function(t){S[t?"unshift":"push"]((()=>{c=t,n(2,c)}))}]}class ot extends K{constructor(t){super(),q(this,t,nt,et,r,{currentSelectedImage:0})}}function it(t,e,n=1){const o=new Date(t,e+1,0).getDate(),i=new Date(t,e,1).getDay()-n;return Math.ceil((o+i)/7)}function rt(t,e,n,o=1){return t*(it(e,n,1)+1)}function ct(e){let n,o,i;return{c(){n=s("div"),g(n,"class","resizer svelte-1kukuk1"),x(n,"left",e[0].x+e[0].width+"px"),x(n,"top",e[0].y+e[0].height+"px")},m(t,r){var c;l(t,n,r),o||(i=p(n,"pointerdown",(c=e[1],function(t){return t.stopPropagation(),c.call(this,t)})),o=!0)},p(t,[e]){1&e&&x(n,"left",t[0].x+t[0].width+"px"),1&e&&x(n,"top",t[0].y+t[0].height+"px")},i:t,o:t,d(t){t&&u(n),o=!1,i()}}}function at(t,e,n){let o;c(t,Z,(t=>n(8,o=t)));let i,r,a,{imageRect:l}=e,{selectedYear:u}=e,{selectedMonth:s}=e,d=!1;function h(t){if(!d)return;const e=t.clientX-i,n=t.clientY-r,o=(7*a.width+e)/7,c=rt(a.height,u,s,1)+n,l=it(u,s,1);var h;h={width:o,height:c/(l+1)},Z.set(h)}function f(t){d=!1,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f)}return t.$$set=t=>{"imageRect"in t&&n(0,l=t.imageRect),"selectedYear"in t&&n(2,u=t.selectedYear),"selectedMonth"in t&&n(3,s=t.selectedMonth)},[l,function(t){d=!0,i=t.clientX,r=t.clientY,a={width:o.width,height:o.height},window.addEventListener("pointermove",h),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f)},u,s]}class lt extends K{constructor(t){super(),q(this,t,at,ct,r,{imageRect:0,selectedYear:2,selectedMonth:3})}}function ut(t,e,n){const o=t.slice();return o[45]=e[n],o}function st(e){let n,o,i=e[45]+"";return{c(){n=s("option"),o=h(i),n.__value=e[45],n.value=n.__value},m(t,e){l(t,n,e),a(n,o)},p:t,d(t){t&&u(n)}}}function dt(t){let e,n,o,i,r;function c(e){t[34](e)}function a(e){t[35](e)}function l(e){t[36](e)}let u={};return void 0!==t[4]&&(u.imageRect=t[4]),void 0!==t[7]&&(u.selectedYear=t[7]),void 0!==t[6]&&(u.selectedMonth=t[6]),e=new lt({props:u}),S.push((()=>J(e,"imageRect",c))),S.push((()=>J(e,"selectedYear",a))),S.push((()=>J(e,"selectedMonth",l))),{c(){T(e.$$.fragment)},m(t,n){X(e,t,n),r=!0},p(t,r){const c={};!n&&16&r[0]&&(n=!0,c.imageRect=t[4],F((()=>n=!1))),!o&&128&r[0]&&(o=!0,c.selectedYear=t[7],F((()=>o=!1))),!i&&64&r[0]&&(i=!0,c.selectedMonth=t[6],F((()=>i=!1))),e.$set(c)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function ht(t){let e,n,i,r,c,d,w,$,b,y,k,C,E,R,D,M,A,I,L,W,O,z,j,q,K,U,G,Q,V,Z,tt,et,nt,it,rt,ct,at,lt,ht,ft,pt,gt,vt,mt,xt,_t,wt,$t,bt,yt,kt,Ct,Et,St,Rt,Dt,Mt,At,Yt,Ft,It,Lt,Wt,Ot,zt,Ht,Nt,Bt,Jt=Array.from({length:11},t[20]),Tt=[];for(let e=0;e<Jt.length;e+=1)Tt[e]=st(ut(t,Jt,e));function Xt(e){t[32](e)}let Pt={};void 0!==t[4]&&(Pt.currentSelectedImage=t[4]),It=new ot({props:Pt}),S.push((()=>J(It,"currentSelectedImage",Xt))),It.$on("imageMoved",t[33]);let jt="calendar"===t[4]?.type&&dt(t);return{c(){e=s("div"),n=s("input"),i=f(),r=s("select"),c=s("option"),c.textContent="January",d=s("option"),d.textContent="February",w=s("option"),w.textContent="March",$=s("option"),$.textContent="April",b=s("option"),b.textContent="May",y=s("option"),y.textContent="June",k=s("option"),k.textContent="July",C=s("option"),C.textContent="August",E=s("option"),E.textContent="September",R=s("option"),R.textContent="October",D=s("option"),D.textContent="November",M=s("option"),M.textContent="December",A=f(),I=s("select");for(let t=0;t<Tt.length;t+=1)Tt[t].c();L=f(),W=s("button"),W.textContent="Export Calendar",O=f(),z=s("button"),z.textContent="Export Year",j=f(),q=s("div"),K=s("label"),K.textContent="Calendar Width:",U=f(),G=s("input"),Q=f(),V=s("label"),V.textContent="Calendar Height:",Z=f(),tt=s("input"),et=f(),nt=s("label"),it=h("Color:\r\n    "),rt=s("input"),ct=f(),at=s("div"),lt=f(),ht=s("label"),ht.textContent="Canvas Width:",ft=f(),pt=s("input"),gt=f(),vt=s("label"),vt.textContent="Canvas Height:",mt=f(),xt=s("input"),_t=f(),wt=s("select"),$t=s("option"),$t.textContent="Fit to background image",bt=s("option"),bt.textContent="800x600",yt=s("option"),yt.textContent="1024x768",kt=s("option"),kt.textContent="1280x720 (720p)",Ct=s("option"),Ct.textContent="1920x1080 (1080p)",Et=s("option"),Et.textContent="2560x1440 (1440p)",St=s("option"),St.textContent="3840x2160 (4K)",Rt=s("option"),Rt.textContent="5120x2880 (5K)",Dt=s("option"),Dt.textContent="7680x4320 (8K)",Mt=f(),At=s("button"),At.textContent="Reset Rects",Yt=f(),Ft=s("div"),T(It.$$.fragment),Wt=f(),jt&&jt.c(),Ot=f(),zt=s("canvas"),g(n,"type","file"),g(n,"accept","image/*"),c.__value=0,c.value=c.__value,d.__value=1,d.value=d.__value,w.__value=2,w.value=w.__value,$.__value=3,$.value=$.__value,b.__value=4,b.value=b.__value,y.__value=5,y.value=y.__value,k.__value=6,k.value=k.__value,C.__value=7,C.value=C.__value,E.__value=8,E.value=E.__value,R.__value=9,R.value=R.__value,D.__value=10,D.value=D.__value,M.__value=11,M.value=M.__value,void 0===t[6]&&Y((()=>t[19].call(r))),void 0===t[7]&&Y((()=>t[21].call(I))),g(e,"class","settings svelte-1liei12"),g(K,"for","boxSizeWidth"),g(G,"id","boxSizeWidth"),g(G,"type","number"),g(G,"min","50"),g(V,"for","boxSizeHeight"),g(tt,"id","boxSizeHeight"),g(tt,"type","number"),g(tt,"min","50"),g(rt,"type","color"),g(rt,"class","calendar-color-picker svelte-1liei12"),g(rt,"id","calendar-color-picker"),g(at,"class","color-display svelte-1liei12"),x(at,"background-color",t[3]),x(at,"border-color",t[8]),g(nt,"for","calendar-color-picker"),g(nt,"class","color-picker-container svelte-1liei12"),g(ht,"for","canvasWidth"),g(pt,"id","canvasWidth"),g(pt,"type","number"),g(pt,"min","300"),g(vt,"for","canvasHeight"),g(xt,"id","canvasHeight"),g(xt,"type","number"),g(xt,"min","300"),$t.__value="auto",$t.value=$t.__value,bt.__value="800x600",bt.value=bt.__value,yt.__value="1024x768",yt.value=yt.__value,kt.__value="1280x720",kt.value=kt.__value,Ct.__value="1920x1080",Ct.value=Ct.__value,Et.__value="2560x1440",Et.value=Et.__value,St.__value="3840x2160",St.value=St.__value,Rt.__value="5120x2880",Rt.value=Rt.__value,Dt.__value="7680x4320",Dt.value=Dt.__value,void 0===t[5]&&Y((()=>t[30].call(wt))),g(q,"class","settings svelte-1liei12"),g(zt,"width",t[1]),g(zt,"height",t[2]),g(zt,"class","svelte-1liei12"),g(Ft,"class","canvas-container svelte-1liei12")},m(o,u){l(o,e,u),a(e,n),a(e,i),a(e,r),a(r,c),a(r,d),a(r,w),a(r,$),a(r,b),a(r,y),a(r,k),a(r,C),a(r,E),a(r,R),a(r,D),a(r,M),_(r,t[6],!0),a(e,A),a(e,I);for(let t=0;t<Tt.length;t+=1)Tt[t]&&Tt[t].m(I,null);_(I,t[7],!0),a(e,L),a(e,W),a(e,O),a(e,z),l(o,j,u),l(o,q,u),a(q,K),a(q,U),a(q,G),m(G,t[9].width),a(q,Q),a(q,V),a(q,Z),a(q,tt),m(tt,t[9].height),a(q,et),a(q,nt),a(nt,it),a(nt,rt),m(rt,t[3]),a(nt,ct),a(nt,at),a(q,lt),a(q,ht),a(q,ft),a(q,pt),m(pt,t[1]),a(q,gt),a(q,vt),a(q,mt),a(q,xt),m(xt,t[2]),a(q,_t),a(q,wt),a(wt,$t),a(wt,bt),a(wt,yt),a(wt,kt),a(wt,Ct),a(wt,Et),a(wt,St),a(wt,Rt),a(wt,Dt),_(wt,t[5],!0),a(q,Mt),a(q,At),l(o,Yt,u),l(o,Ft,u),X(It,Ft,null),a(Ft,Wt),jt&&jt.m(Ft,null),a(Ft,Ot),a(Ft,zt),t[37](zt),Ht=!0,Nt||(Bt=[p(n,"input",t[11]),p(r,"change",t[19]),p(r,"change",t[14]),p(I,"change",t[21]),p(I,"change",t[14]),p(W,"click",t[12]),p(z,"click",t[13]),p(G,"input",t[22]),p(tt,"input",t[23]),p(rt,"input",t[24]),p(rt,"input",t[25]),p(pt,"input",t[26]),p(pt,"input",t[27]),p(xt,"input",t[28]),p(xt,"input",t[29]),p(wt,"change",t[30]),p(wt,"change",t[31]),p(At,"click",t[16])],Nt=!0)},p(t,e){if(64&e[0]&&_(r,t[6]),0&e){let n;for(Jt=Array.from({length:11},t[20]),n=0;n<Jt.length;n+=1){const o=ut(t,Jt,n);Tt[n]?Tt[n].p(o,e):(Tt[n]=st(o),Tt[n].c(),Tt[n].m(I,null))}for(;n<Tt.length;n+=1)Tt[n].d(1);Tt.length=Jt.length}128&e[0]&&_(I,t[7]),512&e[0]&&v(G.value)!==t[9].width&&m(G,t[9].width),512&e[0]&&v(tt.value)!==t[9].height&&m(tt,t[9].height),8&e[0]&&m(rt,t[3]),(!Ht||8&e[0])&&x(at,"background-color",t[3]),(!Ht||256&e[0])&&x(at,"border-color",t[8]),2&e[0]&&v(pt.value)!==t[1]&&m(pt,t[1]),4&e[0]&&v(xt.value)!==t[2]&&m(xt,t[2]),32&e[0]&&_(wt,t[5]);const n={};!Lt&&16&e[0]&&(Lt=!0,n.currentSelectedImage=t[4],F((()=>Lt=!1))),It.$set(n),"calendar"===t[4]?.type?jt?(jt.p(t,e),16&e[0]&&N(jt,1)):(jt=dt(t),jt.c(),N(jt,1),jt.m(Ft,Ot)):jt&&(H={r:0,c:[],p:H},B(jt,1,1,(()=>{jt=null})),H.r||o(H.c),H=H.p),(!Ht||2&e[0])&&g(zt,"width",t[1]),(!Ht||4&e[0])&&g(zt,"height",t[2])},i(t){Ht||(N(It.$$.fragment,t),N(jt),Ht=!0)},o(t){B(It.$$.fragment,t),B(jt),Ht=!1},d(n){n&&u(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(Tt,n),n&&u(j),n&&u(q),n&&u(Yt),n&&u(Ft),P(It),jt&&jt.d(),t[37](null),Nt=!1,o(Bt)}}}function ft(t,e,n){let o,i,r;c(t,Z,(t=>n(9,o=t)));let a,l=0,u=0,s="auto",d=(new Date).getMonth(),h=(new Date).getFullYear(),f="#FFFFFF",p="",g={x:0,y:0,width:0,height:0,type:"background"},m={x:25,y:0,width:0,height:0,type:"calendar"};const x=Object.assign({},m);let _=!1;var $;function b(){_||(_=!0,requestAnimationFrame((()=>{U({month:d,year:h,boxSize:o,backgroundImage:i,canvas:r,calendarRect:m,backgroundRect:g,firstDayOfWeek:1,locale:"en-GB",calendarColor:f}),_=!1})))}function y(){if("auto"===s)i&&(n(1,l=i.naturalWidth),n(2,u=i.naturalHeight));else{const[t,e]=s.split("x").map(Number);n(1,l=t),n(2,u=e)}}function C(){n(18,m.width=7*o.width,m),n(18,m.height=rt(o.height,h,d,1),m)}function E(t){const e=r.getBoundingClientRect(),o=t.pageX-e.left-window.scrollX,i=t.pageY-e.top-window.scrollY;o<0||o>e.width||i<0||i>e.height?n(4,a=void 0):o>=m.x&&o<=m.x+m.width&&i>=m.y&&i<=m.y+m.height?n(4,a=m):o>=g.x&&o<=g.x+g.width&&i>=g.y&&i<=g.y+g.height?n(4,a=g):n(4,a=void 0)}$=()=>{C(),b();const t=[Z.subscribe((()=>(C(),void b())))];return window.addEventListener("pointerup",E),()=>{t.forEach((t=>t())),window.removeEventListener("pointerup",E)}},k().$$.on_mount.push($);return t.$$.update=()=>{7&t.$$.dirty[0]&&r&&(n(0,r.width=l,r),n(0,r.height=u,r),n(17,g.height=u,g),n(17,g.width=l,g)),7&t.$$.dirty[0]&&r&&0!==l&&0!==u&&b(),8&t.$$.dirty[0]&&n(8,p=function(t){const e=parseInt(t.replace("#",""),16);return.2126*(e>>16&255)+.7152*(e>>8&255)+.0722*(e>>0&255)<32}(f)?"transparent":"black"),393232&t.$$.dirty[0]&&(g||m)&&V.set(a),16&t.$$.dirty[0]&&a&&V.set(a)},[r,l,u,f,a,s,d,h,p,o,b,function(t){const e=t.target.files[0],o=new FileReader;o.onload=t=>{i=new Image,i.src=t.target.result,i.onload=()=>(y(),n(17,g.height=u,g),void n(17,g.width=l,g))},o.readAsDataURL(e)},function(){const t=r.toDataURL("image/png"),e=document.createElement("a");e.href=t;const n=`${h}_${["January","February","March","April","May","June","July","August","September","October","November","December"][d]}.png`;e.download=n,e.click()},function(){const t=function(t){const{year:e,boxSize:n,backgroundImage:o,calendarColor:i,firstDayOfWeek:r,backgroundRect:c,calendarRect:a,cellWidth:l,cellHeight:u,cellSpacing:s}=t,d=document.createElement("canvas");d.width=3*l+2*s,d.height=4*u+3*s;const h=d.getContext("2d"),f=document.createElement("canvas");f.width=l,f.height=u;for(let t=0;t<4;t++)for(let d=0;d<3;d++){U({month:3*t+d,year:e,boxSize:n,backgroundImage:o,canvas:f,backgroundRect:c,calendarRect:a,calendarColor:i,firstDayOfWeek:r});const p=d*(l+s),g=t*(u+s);h.drawImage(f,p,g,l,u)}return d}({year:h,boxSize:o,backgroundImage:i,backgroundRect:g,calendarRect:m,calendarColor:f,firstDayOfWeek:1,cellHeight:u,cellSpacing:5,cellWidth:l}),e=t.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download=`calendar-${h}.png`,n.click()},function(){b()},y,function(){n(18,m.x=x.x,m),n(18,m.y=x.y,m),n(17,g.x=0,g),n(17,g.y=0,g),b()},g,m,function(){d=w(this),n(6,d)},(t,e)=>(new Date).getFullYear()-5+e,function(){h=w(this),n(7,h)},function(){o.width=v(this.value),Z.set(o)},function(){o.height=v(this.value),Z.set(o)},function(){f=this.value,n(3,f)},()=>b(),function(){l=v(this.value),n(1,l)},()=>b(),function(){u=v(this.value),n(2,u)},()=>b(),function(){s=w(this),n(5,s)},()=>y(),function(t){a=t,n(4,a)},()=>{b()},function(t){a=t,n(4,a)},function(t){h=t,n(7,h)},function(t){d=t,n(6,d)},function(t){S[t?"unshift":"push"]((()=>{r=t,n(0,r),n(1,l),n(2,u)}))}]}class pt extends K{constructor(t){super(),q(this,t,ft,ht,r,{},null,[-1,-1])}}function gt(e){let n,o,i;return o=new pt({}),{c(){n=s("main"),T(o.$$.fragment)},m(t,e){l(t,n,e),X(o,n,null),i=!0},p:t,i(t){i||(N(o.$$.fragment,t),i=!0)},o(t){B(o.$$.fragment,t),i=!1},d(t){t&&u(n),P(o)}}}return new class extends K{constructor(t){super(),q(this,t,null,gt,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
